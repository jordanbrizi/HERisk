<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Results</title>
	<link rel="stylesheet" type="text/css" href="./css/app.css">
</head>

<body>
<main>
	<button type="button" class="main-button" id="close_button"></button>

	<header class="pb-3 fixed-top page">
		<div class="container-fluid" id="config"></div>
		<div class="container-fluid pt-3">
			<h1 class="m-0 user-select-none">hh<b>risk</b></h1>
			<p class="font-italic user-select-none p-0 m-0"><span data-lang="version"></span> <span class="version"></span></p>
		</div>
	</header>

	<section class="over">
		<div class="container-fluid" id="resultados">
			<h4 class="mb-3 text-center" id="teste">Resultados:</h4>
		</div>
	</section>

	<footer class="fixed-bottom">
		<div class="container-fluid">
			<p class="pt-3 user-select-none" onclick="location.reload()">
				&copy; 2020 - <span class="year"></span>. <span data-lang="all_rights"></span>. <span class="app_version"></span>
			</p>
		</div>
	</footer>
</main>
<script>
	const rend = require('./renderer.js')
	const $ = arg => document.querySelector(arg)
	const $$ = arg => document.querySelectorAll(arg)

	d = new Date()
	$('.year').innerHTML = d.getFullYear()
	$('.version').innerHTML = rend.pkg().version

	$('#close_button').addEventListener('click', () => {
		rend.ipcRenderer.send('resultados')
	})

	const tab = rend.Exposure()
	const Exposure = Object.keys(tab)

	Exposure.forEach(pai => {
		var tabela = document.createElement('table')
		var thead = document.createElement('thead')
		var tbody = document.createElement('tbody')

		tab[pai].forEach(filho => {
			console.table(filho)
			var tr = document.createElement('tr')
			var td = document.createElement('td')
			text = document.createTextNode(`${filho.ADD}`)
			tabela.appendChild(
				tbody.appendChild(
					tr.appendChild(
						td.appendChild(text)
					)
				)
			)
			$('#resultados').appendChild(tabela)
		})
	})
</script>
</body>
</html>